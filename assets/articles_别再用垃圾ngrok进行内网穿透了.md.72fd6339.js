import{_ as s,c as a,o as n,d as l}from"./app.baa7ecd7.js";const f=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"articles/别再用垃圾ngrok进行内网穿透了.md","lastUpdated":1676093087000}'),o={name:"articles/别再用垃圾ngrok进行内网穿透了.md"},e=l(`<p>hello，大家好，我是<code>元宝</code>，最近在接触微信小程序支付的功能，然后要接收微信服务器发来的支付回调，所以微信后台要设置消息推送的配置，结果让我看到了这个很难受的提示 <img src="https://files.mdnice.com/user/36542/aeeff9df-b31f-4a2a-8c75-bce4502005fb.png" alt=""> 什么！！！一个月只能修改<code>三次</code>，我靠(因为我使用的内网穿透工具每次重新启动<code>地址都会变更</code>，每次变更都要修改，所以根本不切实际)</p><p>这里先科普一下什么是<code>内网穿透</code></p><h2 id="内网穿透" tabindex="-1">内网穿透 <a class="header-anchor" href="#内网穿透" aria-hidden="true">#</a></h2><p>现在由于ipv4的地址已经殆尽....，所以什么xxx设计出了内网ip来解决ipv4地址不够的问题，也就是平时我们看到的<code>10.0.xxx</code>、<code>172.16.xxx</code>、<code>192.168.xxx</code>这类地址，但是内网我们是不能直接通过外网访问，只有在同一局域网内的设备能相互访问，于是就诞生了<code>Nat技术(Network Address Translation网络地址转换)</code>，我们通过这个技术实现<code>内外网互通</code>，就是这么的哇塞～～～</p><h2 id="内网穿透工具" tabindex="-1">内网穿透工具 <a class="header-anchor" href="#内网穿透工具" aria-hidden="true">#</a></h2><p>现在市面上的内网穿透工具要么是国外开源的<code>ngrok</code>（网速慢的要死)，要么就是国内的<code>cpolar</code>(网速不错，但是每次重新启动的地址都是随机生成的，要想配置自定义域名必须给money💰，况且还很贵)，程序员的我除了服务器费用之外怎么可能会自己掏钱呢？？？于是找了很多解决方案，还果真有解决方案------<code>frps</code></p><h2 id="frps代理访问" tabindex="-1">frps代理访问 <a class="header-anchor" href="#frps代理访问" aria-hidden="true">#</a></h2><blockquote><p>前提条件：一台<strong>公网ip</strong>的服务器</p></blockquote><ol><li>github访问这个仓库<code>fatedier/frp</code></li><li>在relase中找到自己系统架构的源码文件，本地和服务器都要进行下载(也可以本地下载好上传至服务器) <img src="https://files.mdnice.com/user/36542/db29282c-86b6-4f17-a888-715ffae3ba6e.png" alt=""></li><li>解压下载的源码可以看到文件夹内有两个配置文件<code>frpc.ini</code>和<code>frps.ini</code>,带<code>c</code>后缀的是客户端配置文件，带<code>s</code>后缀的是服务器配置 <img src="https://files.mdnice.com/user/36542/40a1abff-5a03-4066-8ac2-a1d9aab4763a.png" alt=""></li><li>在服务器上打开<code>frps.ini</code>，修改配置如下</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">common</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># frps服务器端口，防火墙要打开</span></span>
<span class="line"><span style="color:#FFCB6B;">bind_port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7000</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 验证客户端连接</span></span>
<span class="line"><span style="color:#FFCB6B;">token</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">1234567820222022ccc</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>服务器启动<code>./frps -c ./frps.ini</code></li><li>本地打开<code>frpc.ini</code>，配置如下</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">common</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 服务器公网ip</span></span>
<span class="line"><span style="color:#FFCB6B;">server_addr</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxxx.xxxx.xxxx.xxxx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 服务器frps端口</span></span>
<span class="line"><span style="color:#FFCB6B;">server_port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7000</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 服务器要验证客户端的token</span></span>
<span class="line"><span style="color:#FFCB6B;">token</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">1234567820222022ccc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">ssh</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp</span></span>
<span class="line"><span style="color:#FFCB6B;">local_ip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">127.0.0.1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 本地服务端口</span></span>
<span class="line"><span style="color:#FFCB6B;">local_port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9000</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 通过服务器访问本地服务的端口，防火墙要开</span></span>
<span class="line"><span style="color:#FFCB6B;">remote_port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7001</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 自定义域名</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># custom_domains = xxxxxx</span></span>
<span class="line"></span></code></pre></div><ol start="7"><li>本地启动<code>./frpc -c ./frpc.ini</code></li><li>测试，如果有配置域名就访问<code>http://域名:7001</code>，如果没有就访问<code>http://服务器ip:7001</code>，这样就可以访问本地的服务啦</li></ol><p>看到看到这里了，还不关注学点技术嘛....</p>`,14),p=[e];function c(t,r,i,d,y,C){return n(),a("div",null,p)}const A=s(o,[["render",c]]);export{f as __pageData,A as default};
