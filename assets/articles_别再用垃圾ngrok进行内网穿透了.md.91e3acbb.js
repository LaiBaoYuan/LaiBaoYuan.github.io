import{_ as s,c as a,o as n,d as o}from"./app.370bcb7a.js";const h=JSON.parse('{"title":"别再用垃圾ngrok进行内网穿透了","description":"","frontmatter":{"title":"别再用垃圾ngrok进行内网穿透了"},"headers":[],"relativePath":"articles/别再用垃圾ngrok进行内网穿透了.md","lastUpdated":1677988594000}'),l={name:"articles/别再用垃圾ngrok进行内网穿透了.md"},p=o(`<div class="tip custom-block"><p class="custom-block-title">前言</p><p>hello，大家好，我是<code>元宝</code>，最近在接触微信小程序支付的功能，然后要接收微信服务器发来的支付回调，所以微信后台要设置消息推送的配置，结果让我看到了这个很难受的提示 <img src="https://aliyun.workdomain.cloud/github/image-20230304160806764.png" alt=""> 什么！！！一个月只能修改<code>三次</code>，我靠(因为我使用的内网穿透工具每次重新启动<code>地址都会变更</code>，每次变更都要修改，所以根本不切实际)</p></div><p>这里先科普一下什么是<code>内网穿透</code></p><h2 id="内网穿透" tabindex="-1">内网穿透 <a class="header-anchor" href="#内网穿透" aria-hidden="true">#</a></h2><p>现在由于ipv4的地址已经殆尽....，所以什么xxx设计出了内网ip来解决ipv4地址不够的问题，也就是平时我们看到的<code>10.0.xxx</code>、<code>172.16.xxx</code>、<code>192.168.xxx</code>这类地址，但是内网我们是不能直接通过外网访问，只有在同一局域网内的设备能相互访问，于是就诞生了<code>Nat技术(Network Address Translation网络地址转换)</code>，我们通过这个技术实现<code>内外网互通</code>，就是这么的哇塞～～～</p><h2 id="内网穿透工具" tabindex="-1">内网穿透工具 <a class="header-anchor" href="#内网穿透工具" aria-hidden="true">#</a></h2><p>现在市面上的内网穿透工具要么是国外开源的<code>ngrok</code>（网速慢的要死)，要么就是国内的<code>cpolar</code>(网速不错，但是每次重新启动的地址都是随机生成的，要想配置自定义域名必须给money💰，况且还很贵)，程序员的我除了服务器费用之外怎么可能会自己掏钱呢？？？于是找了很多解决方案，还果真有解决方案------<code>frps</code></p><h2 id="frps代理访问" tabindex="-1">frps代理访问 <a class="header-anchor" href="#frps代理访问" aria-hidden="true">#</a></h2><blockquote><p>前提条件：一台<strong>公网ip</strong>的服务器</p></blockquote><ol><li>github访问这个仓库<code>fatedier/frp</code></li><li>在relase中找到自己系统架构的源码文件，本地和服务器都要进行下载(也可以本地下载好上传至服务器) <img src="https://aliyun.workdomain.cloud/github/image-20230304160829549.png" alt=""></li><li>解压下载的源码可以看到文件夹内有两个配置文件<code>frpc.ini</code>和<code>frps.ini</code>,带<code>c</code>后缀的是客户端配置文件，带<code>s</code>后缀的是服务器配置 <img src="https://aliyun.workdomain.cloud/github/image-20230304160853987.png" alt=""></li><li>在服务器上打开<code>frps.ini</code>，修改配置如下</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">[common]</span></span>
<span class="line"><span style="color:#6272A4;"># frps服务器端口，防火墙要打开</span></span>
<span class="line"><span style="color:#F8F8F2;">bind_port </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">7000</span></span>
<span class="line"><span style="color:#6272A4;"># 验证客户端连接</span></span>
<span class="line"><span style="color:#F8F8F2;">token </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">1234567820222022ccc</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>服务器启动<code>./frps -c ./frps.ini</code></li><li>本地打开<code>frpc.ini</code>，配置如下</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">[common]</span></span>
<span class="line"><span style="color:#6272A4;"># 服务器公网ip</span></span>
<span class="line"><span style="color:#F8F8F2;">server_addr </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">xxxx.xxxx.xxxx.xxxx</span></span>
<span class="line"><span style="color:#6272A4;"># 服务器frps端口</span></span>
<span class="line"><span style="color:#F8F8F2;">server_port </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">7000</span></span>
<span class="line"><span style="color:#6272A4;"># 服务器要验证客户端的token</span></span>
<span class="line"><span style="color:#F8F8F2;">token </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">1234567820222022ccc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">[ssh]</span></span>
<span class="line"><span style="color:#8BE9FD;">type</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">tcp</span></span>
<span class="line"><span style="color:#F8F8F2;">local_ip </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">127.0.0.1</span></span>
<span class="line"><span style="color:#6272A4;"># 本地服务端口</span></span>
<span class="line"><span style="color:#F8F8F2;">local_port </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">9000</span></span>
<span class="line"><span style="color:#6272A4;"># 通过服务器访问本地服务的端口，防火墙要开</span></span>
<span class="line"><span style="color:#F8F8F2;">remote_port </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">7001</span></span>
<span class="line"><span style="color:#6272A4;"># 自定义域名</span></span>
<span class="line"><span style="color:#6272A4;"># custom_domains = xxxxxx</span></span>
<span class="line"></span></code></pre></div><ol start="7"><li>本地启动<code>./frpc -c ./frpc.ini</code></li><li>测试，如果有配置域名就访问<code>http://域名:7001</code>，如果没有就访问<code>http://服务器ip:7001</code>，这样就可以访问本地的服务啦</li></ol>`,13),e=[p];function c(t,r,i,d,F,y){return n(),a("div",null,e)}const x=s(l,[["render",c]]);export{h as __pageData,x as default};
